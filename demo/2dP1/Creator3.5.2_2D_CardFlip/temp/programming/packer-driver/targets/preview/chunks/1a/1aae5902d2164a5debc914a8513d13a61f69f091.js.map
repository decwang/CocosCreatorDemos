{"version":3,"sources":["file:///Users/mu/work/gitee/CocosCreatorDemos/demo/2dP1/Creator3.5.2_2D_CardFlip/assets/scripts/Case_CardFlip.ts"],"names":["TweenUtil","ccclass","property","cc","_decorator","Case_CardFlip","displayName","CC_DEV","type","Node","Component","button","frontColor","Color","WHITE","backColor","GRAY","onLoad","init","registerEvent","start","reset","onDestroy","unregisterEvent","flipBtn","on","EventType","TOUCH_END","onFlipBtnClick","off","getComponent","Button","addComponent","card","color","setButtonState","interactable","flip","equals"],"mappings":"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","sourcesContent":["import TweenUtil from \"../../../eazax-ccc/utils/TweenUtil\";\n\nconst { ccclass, property } = cc._decorator;\n\n/**\n * 卡片翻转\n * @see TweenUtil.ts https://gitee.com/ifaswind/eazax-ccc/blob/master/utils/TweenUtil.ts\n * @version 20210320\n */\n@ccclass\nexport default class Case_CardFlip extends cc.Component {\n\n    @property({ displayName: CC_DEV && '卡片', type: cc.Node })\n    protected card: cc.Node = null;\n\n    @property({ displayName: CC_DEV && '翻转按钮', type: cc.Node })\n    protected flipBtn: cc.Node = null;\n\n    /** 按钮组件 */\n    protected button: cc.Button = null;\n\n    /** 正面颜色 */\n    protected readonly frontColor: cc.Color = cc.Color.WHITE;\n\n    /** 背面颜色 */\n    protected readonly backColor: cc.Color = cc.Color.GRAY;\n\n    protected onLoad() {\n        this.init();\n        this.registerEvent();\n    }\n\n    protected start() {\n        this.reset();\n    }\n\n    protected onDestroy() {\n        this.unregisterEvent();\n    }\n\n    /**\n     * 注册事件\n     */\n    protected registerEvent() {\n        this.flipBtn.on(cc.Node.EventType.TOUCH_END, this.onFlipBtnClick, this);\n    }\n\n    /**\n     * 反注册事件\n     */\n    protected unregisterEvent() {\n        this.flipBtn.off(cc.Node.EventType.TOUCH_END, this.onFlipBtnClick, this);\n    }\n\n    /**\n     * 初始化\n     */\n    protected init() {\n        this.button = this.flipBtn.getComponent(cc.Button) || this.flipBtn.addComponent(cc.Button);\n    }\n\n    /**\n     * 重置\n     */\n    protected reset() {\n        this.card.color = this.frontColor;\n        this.setButtonState(true);\n    }\n\n    /**\n     * 翻转按钮点击回调\n     */\n    protected async onFlipBtnClick() {\n        if (!this.button.interactable) return;\n        this.setButtonState(false);\n        await TweenUtil.flip(this.card, 2, () => {\n            if (this.card.color.equals(this.frontColor)) {\n                this.card.color = this.backColor;\n            } else {\n                this.card.color = this.frontColor;\n            }\n        });\n        this.setButtonState(true);\n    }\n\n    /**\n     * 设置按钮状态\n     * @param interactable 是否可点击\n     */\n    protected setButtonState(interactable: boolean) {\n        this.button.interactable = interactable;\n        this.flipBtn.color = interactable ? cc.Color.WHITE : cc.Color.GRAY;\n    }\n\n}\n"]}