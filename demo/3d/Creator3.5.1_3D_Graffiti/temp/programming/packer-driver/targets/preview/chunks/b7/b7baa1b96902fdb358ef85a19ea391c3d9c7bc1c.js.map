{"version":3,"sources":["file:///Users/mu/work/gitee/CocosCreatorDemos/demo/3d/Creator3.5.1_3D_Graffiti/assets/scripts/DragAndRotate.ts"],"names":["_decorator","Component","systemEvent","SystemEvent","Quat","Vec2","ccclass","property","DragAndRotate","quat","delta","ZERO","start","onEnable","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","onDisable","off","touch","event","getUIDelta","update","fromEuler","y","x","node","rotate"],"mappings":";;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,W,OAAAA,W;AAAgCC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;;;;;;OACnF;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;+BAIjBQ,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb,SACmCP,SADnC,CAC6C;AAAA;AAAA;AAAA,eAEjCQ,IAFiC,GAEpB,IAAIL,IAAJ,EAFoB;AAAA,eAGjCM,KAHiC,GAGnBL,IAAI,CAACM,IAHc;AAAA;;AAKzCC,QAAAA,KAAK,GAAI,CACR;;AAEDC,QAAAA,QAAQ,GAAI;AACRX,UAAAA,WAAW,CAACY,EAAZ,CAAeX,WAAW,CAACY,SAAZ,CAAsBC,WAArC,EAAkD,KAAKC,YAAvD,EAAqE,IAArE;AACAf,UAAAA,WAAW,CAACY,EAAZ,CAAeX,WAAW,CAACY,SAAZ,CAAsBG,UAArC,EAAiD,KAAKC,WAAtD,EAAmE,IAAnE;AACAjB,UAAAA,WAAW,CAACY,EAAZ,CAAeX,WAAW,CAACY,SAAZ,CAAsBK,SAArC,EAAgD,KAAKC,UAArD,EAAiE,IAAjE;AACH;;AAEDC,QAAAA,SAAS,GAAI;AACTpB,UAAAA,WAAW,CAACqB,GAAZ,CAAgBpB,WAAW,CAACY,SAAZ,CAAsBC,WAAtC,EAAmD,KAAKC,YAAxD,EAAsE,IAAtE;AACAf,UAAAA,WAAW,CAACqB,GAAZ,CAAgBpB,WAAW,CAACY,SAAZ,CAAsBG,UAAtC,EAAkD,KAAKC,WAAvD,EAAoE,IAApE;AACAjB,UAAAA,WAAW,CAACqB,GAAZ,CAAgBpB,WAAW,CAACY,SAAZ,CAAsBK,SAAtC,EAAiD,KAAKC,UAAtD,EAAkE,IAAlE;AACH;;AAEDJ,QAAAA,YAAY,CAAEO,KAAF,EAAgBC,KAAhB,EAAmC;AAC3C,eAAKf,KAAL,GAAaL,IAAI,CAACM,IAAlB;AACH;;AAEDQ,QAAAA,WAAW,CAAEK,KAAF,EAAgBC,KAAhB,EAAmC;AAC1C,eAAKf,KAAL,GAAac,KAAK,CAACE,UAAN,EAAb;AACH;;AAEDL,QAAAA,UAAU,CAAEG,KAAF,EAAgBC,KAAhB,EAAmC;AACzC,eAAKf,KAAL,GAAaL,IAAI,CAACM,IAAlB;AACH;;AAEDgB,QAAAA,MAAM,GAAG;AACLvB,UAAAA,IAAI,CAACwB,SAAL,CAAe,KAAKnB,IAApB,EAA0B,CAAC,KAAKC,KAAL,CAAWmB,CAAtC,EAAyC,KAAKnB,KAAL,CAAWoB,CAApD,EAAuD,CAAvD;AACA,eAAKC,IAAL,CAAUC,MAAV,CAAiB,KAAKvB,IAAtB,EAA4B,CAA5B;AACH;;AAnCwC,O","sourcesContent":["\r\nimport { _decorator, Component, Node, systemEvent, SystemEvent, EventTouch, Touch, Quat, Vec2 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n \r\n@ccclass('DragAndRotate')\r\nexport class DragAndRotate extends Component {\r\n\r\n    private quat: Quat = new Quat();\r\n    private delta: Vec2 = Vec2.ZERO;\r\n\r\n    start () {\r\n    }\r\n\r\n    onEnable () {\r\n        systemEvent.on(SystemEvent.EventType.TOUCH_START, this.onTouchStart, this);\r\n        systemEvent.on(SystemEvent.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        systemEvent.on(SystemEvent.EventType.TOUCH_END, this.onTouchEnd, this);\r\n    }\r\n\r\n    onDisable () {\r\n        systemEvent.off(SystemEvent.EventType.TOUCH_START, this.onTouchStart, this);\r\n        systemEvent.off(SystemEvent.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        systemEvent.off(SystemEvent.EventType.TOUCH_END, this.onTouchEnd, this);\r\n    }\r\n\r\n    onTouchStart (touch: Touch, event: EventTouch) {\r\n        this.delta = Vec2.ZERO;\r\n    }\r\n\r\n    onTouchMove (touch: Touch, event: EventTouch) {\r\n        this.delta = touch.getUIDelta();\r\n    }\r\n\r\n    onTouchEnd (touch: Touch, event: EventTouch) {\r\n        this.delta = Vec2.ZERO;\r\n    }\r\n\r\n    update() {\r\n        Quat.fromEuler(this.quat, -this.delta.y, this.delta.x, 0);\r\n        this.node.rotate(this.quat, 1);\r\n    }\r\n\r\n}\r\n\r\n"]}