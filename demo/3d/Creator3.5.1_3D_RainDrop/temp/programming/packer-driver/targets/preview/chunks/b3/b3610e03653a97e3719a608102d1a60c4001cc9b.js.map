{"version":3,"sources":["file:///Users/mu/work/gitee/CocosCreatorDemos/demo/3d/Creator3.5.1_3D_RainDrop/assets/script/PPRaindropStage.ts"],"names":["_decorator","Vec2","PPBaseStage","ccclass","PPRaindropStage","constructor","_name","initWithStageDesc","mgr","pl","paramTexs","outputTexName","tex","getFrameBuffer","texSize","colorTextures","x","width","y","height","bindShaderParamsVec2"],"mappings":";;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAA4BC,MAAAA,I,OAAAA,I;;AAC5BC,MAAAA,W,iBAAAA,W;;;;;;;OAEH;AAAEC,QAAAA;AAAF,O,GAAcH,U;;iCAGPI,e,WADZD,OAAO,CAAC,iBAAD,C,gBAAR,MACaC,eADb;AAAA;AAAA,sCACiD;AAE7CC,QAAAA,WAAW,GAAG;AACV;AACA,eAAKC,KAAL,GAAa,iBAAb;AACH;;AAEMC,QAAAA,iBAAiB,CAACC,GAAD,EAAaC,EAAb,EAAiC;AACrD,eAAKC,SAAL,GAAiB,CAAC,WAAD,CAAjB;AACA,eAAKC,aAAL,GAAqB,EAArB;AAEA,gBAAMJ,iBAAN,CAAwBC,GAAxB,EAA6BC,EAA7B;AAEA,cAAMG,GAAG,GAAGJ,GAAG,CAACK,cAAJ,CAAmB,WAAnB,CAAZ;AACA,cAAMC,OAAO,GAAG,IAAIb,IAAJ,CAAS,CAAT,EAAY,CAAZ,CAAhB;;AACA,cAAIW,GAAG,IAAIA,GAAG,CAACG,aAAJ,CAAkB,CAAlB,CAAX,EAAiC;AAC7BD,YAAAA,OAAO,CAACE,CAAR,GAAYJ,GAAG,CAACG,aAAJ,CAAkB,CAAlB,EAAqBE,KAAjC;AACAH,YAAAA,OAAO,CAACI,CAAR,GAAYN,GAAG,CAACG,aAAJ,CAAkB,CAAlB,EAAqBI,MAAjC;AACH;;AACD,eAAKC,oBAAL,CAA0B,SAA1B,EAAqCN,OAArC;AACH;;AApB4C,O","sourcesContent":["\r\nimport { _decorator, RenderPipeline, Vec2 } from 'cc';\r\nimport { PPBaseStage } from './PPBaseStage';\r\nimport { PPMgr } from './PPMgr';\r\nconst { ccclass } = _decorator;\r\n\r\n@ccclass('PPRaindropStage')\r\nexport class PPRaindropStage extends PPBaseStage {\r\n\r\n    constructor() {\r\n        super();\r\n        this._name = \"PPRaindropStage\";\r\n    }\r\n\r\n    public initWithStageDesc(mgr: PPMgr, pl: RenderPipeline) {\r\n        this.paramTexs = ['screenTex'];\r\n        this.outputTexName = '';\r\n\r\n        super.initWithStageDesc(mgr, pl);\r\n\r\n        const tex = mgr.getFrameBuffer('screenTex');\r\n        const texSize = new Vec2(1, 1);\r\n        if (tex && tex.colorTextures[0]) {\r\n            texSize.x = tex.colorTextures[0].width;\r\n            texSize.y = tex.colorTextures[0].height;\r\n        }\r\n        this.bindShaderParamsVec2('winSize', texSize);\r\n    }\r\n\r\n}\r\n"]}