{"version":3,"sources":["file:///Users/mu/work/gitee/CocosCreatorDemos/demo/3d/Creator3.5.2_3D_Skybox/assets/src/UI_Skybox_HUD.ts"],"names":["UI_SkyboxHUD","Button","director","loader","TextureCube","find","UIController","UILayer","constructor","HUD","_oldSelected","_isLoadingCubemap","onCreated","i","index","sep","skyboxName","btnName","onButtonEvent","btn","interactable","loadRes","err","cubemap","getScene","globals","skybox","envmap","node","getComponent"],"mappings":";;;kGAIaA,Y;;;;;;;;;;;;;;;;;AAJqCC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AAChFC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;8BAEIP,Y,GAAN,MAAMA,YAAN;AAAA;AAAA,wCAAwC;AAE3CQ,QAAAA,WAAW,GAAG;AACV,gBAAM,4BAAN,EAAoC;AAAA;AAAA,kCAAQC,GAA5C;AADU,eAINC,YAJM,GAIiB,IAJjB;AAAA,eAKNC,iBALM,GAKc,KALd;AAEb;;AAKSC,QAAAA,SAAS,GAAG;AAClB,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwB,EAAEA,CAA1B,EAA6B;AACzB,gBAAIC,KAAK,GAAGD,CAAC,GAAG,CAAhB;AACA,gBAAIE,GAAG,GAAGD,KAAK,GAAG,EAAR,GAAa,GAAb,GAAmB,EAA7B;AACA,gBAAIE,UAAU,GAAGD,GAAG,GAAGD,KAAvB;AACA,gBAAIG,OAAO,GAAG,kCAAkCD,UAAhD;AACA,iBAAKE,aAAL,CAAmBD,OAAnB,EAA4B,CAACE,GAAD,EAAcH,UAAd,KAAqC;AAC7D,kBAAI,KAAKL,iBAAT,EAA4B;AACxB;AACH;;AAEDQ,cAAAA,GAAG,CAACC,YAAJ,GAAmB,KAAnB;;AACA,kBAAI,KAAKV,YAAT,EAAuB;AACnB,qBAAKA,YAAL,CAAkBU,YAAlB,GAAiC,IAAjC;AACH;;AACD,mBAAKV,YAAL,GAAoBS,GAApB;AAEA,mBAAKR,iBAAL,GAAyB,IAAzB;AACAR,cAAAA,MAAM,CAACkB,OAAP,CAAe,8BAA8BL,UAA7C,EAAyDZ,WAAzD,EAAsE,CAACkB,GAAD,EAAMC,OAAN,KAA+B;AACjG,qBAAKZ,iBAAL,GAAyB,KAAzB;AACAT,gBAAAA,QAAQ,CAACsB,QAAT,GAAoBC,OAApB,CAA4BC,MAA5B,CAAmCC,MAAnC,GAA4CJ,OAA5C;AACH,eAHD;AAKH,aAjBD,EAiBG,IAjBH,EAiBSP,UAjBT;;AAmBA,gBAAGH,CAAC,IAAI,CAAR,EAAU;AACN,mBAAKH,YAAL,GAAqBL,IAAI,CAACY,OAAD,EAAS,KAAKW,IAAd,CAAL,CAAkCC,YAAlC,CAA+C5B,MAA/C,CAApB;AACA,mBAAKS,YAAL,CAAkBU,YAAlB,GAAiC,KAAjC;AACH;AACJ;AACJ;;AAvC0C,O","sourcesContent":["import { _decorator, Component, Node, EventTouch, Button, director, loader, TextureCube, find } from 'cc';\nimport { UIController } from './UIController';\nimport { UILayer, UIMgr } from './UIMgr';\n\nexport class UI_SkyboxHUD extends UIController {\n\n    constructor() {\n        super('prefab/ui_skybox_hud_panel', UILayer.HUD);\n    }\n\n    private _oldSelected: Button = null;\n    private _isLoadingCubemap = false;\n\n    protected onCreated() {\n        for (let i = 0; i < 10; ++i) {\n            let index = i + 1;\n            let sep = index < 10 ? '0' : '';\n            let skyboxName = sep + index;\n            let btnName = 'ScrollView/view/content/btn_0' + skyboxName;\n            this.onButtonEvent(btnName, (btn: Button, skyboxName: string) => {\n                if (this._isLoadingCubemap) {\n                    return;\n                }\n\n                btn.interactable = false;\n                if (this._oldSelected) {\n                    this._oldSelected.interactable = true;\n                }\n                this._oldSelected = btn;\n\n                this._isLoadingCubemap = true;\n                loader.loadRes('common/skybox/cubemap_sky' + skyboxName, TextureCube, (err, cubemap: TextureCube) => {\n                    this._isLoadingCubemap = false;\n                    director.getScene().globals.skybox.envmap = cubemap;\n                });\n\n            }, this, skyboxName);\n\n            if(i == 0){\n                this._oldSelected = (find(btnName,this.node) as Node).getComponent(Button);\n                this._oldSelected.interactable = false;\n            }\n        }\n    }\n}"]}